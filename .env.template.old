# üîê SECURITY CONFIGURATION TEMPLATE
# Copy this file to .env and fill in your secure values
# NEVER commit .env file to repository!

# =============================================================================
# üåê DOMAIN CONFIGURATION
# =============================================================================

# Primary domain for the application (REQUIRED)
# Change this to your actual domain (e.g., muriel-cz.cz, localhost, etc.)
DOMAIN=core-platform.local

# =============================================================================
# üö® CRITICAL SECURITY SETTINGS
# =============================================================================

# Keycloak Admin Service Account (REQUIRED)
KEYCLOAK_ADMIN_BASE_URL=http://keycloak:8080
KEYCLOAK_ADMIN_REALM=master
KEYCLOAK_ADMIN_CLIENT_ID=backend-admin-service
KEYCLOAK_ADMIN_CLIENT_SECRET=your-secure-backend-secret-key-here
KEYCLOAK_TARGET_REALM=core-platform

# Database Credentials (REQUIRED)
DB_HOST=core-db
DB_PORT=5432
DB_NAME=core_platform
DB_USERNAME=core_user
DB_PASSWORD=core

# JWT/OIDC Configuration (REQUIRED)
OIDC_ISSUER=http://keycloak:8080/realms/admin
OIDC_API_AUDIENCE=api
CORS_ORIGINS=http://localhost:3000,https://*.core-platform.local

# Application Secrets (REQUIRED)
APP_SECRET_KEY=YOUR_64_CHARACTER_RANDOM_SECRET_KEY_HERE
JWT_SIGNING_KEY=YOUR_JWT_SIGNING_SECRET_HERE

# =============================================================================
# üîí OPTIONAL SECURITY SETTINGS
# =============================================================================

# Rate Limiting
RATE_LIMIT_AUTH_REQUESTS_PER_MINUTE=10
RATE_LIMIT_API_REQUESTS_PER_MINUTE=100

# Session Security
SESSION_TIMEOUT_MINUTES=30
TOKEN_REFRESH_THRESHOLD_SECONDS=300

# Audit Logging
AUDIT_LOG_LEVEL=INFO
AUDIT_LOG_RETENTION_DAYS=90

# Security Headers
CSP_POLICY="default-src 'self'; script-src 'self' 'unsafe-inline'"
HSTS_MAX_AGE_SECONDS=31536000

# =============================================================================
# üåç ENVIRONMENT SPECIFIC
# =============================================================================

# Environment (development|staging|production)
ENVIRONMENT=development
LOG_LEVEL=DEBUG

# External Services - Grafana
GRAFANA_OIDC_SECRET=grafana-ops-secret-change-me-in-prod
GRAFANA_ADMIN_PASSWORD=admin123

# üóÑÔ∏è GRAFANA DATABASE CONFIGURATION
# Grafana uses PostgreSQL for persistent storage (not SQLite)
# SECURITY: Use separate user with minimal permissions (see DB_SEPARATE_USERS_PLAN.md)
GRAFANA_DB_NAME=grafana
GRAFANA_DB_USERNAME=core
GRAFANA_DB_PASSWORD=core

# External Services - Prometheus
PROMETHEUS_PASSWORD=YOUR_PROMETHEUS_PASSWORD_HERE

# =============================================================================
# üìù SECURITY NOTES
# =============================================================================
# 
# 1. Generate strong passwords: openssl rand -base64 32
# 2. Use different secrets for each environment
# 3. Rotate secrets regularly (quarterly minimum)
# 4. Never log or expose these values
# 5. Use secrets management in production (HashiCorp Vault, AWS Secrets Manager)
# 
# =============================================================================

# Keycloak Configuration
KEYCLOAK_ADMIN=${KEYCLOAK_ADMIN:-admin}
KEYCLOAK_ADMIN_PASSWORD=admin123

# ==== üåê CORE PLATFORM CONFIGURATION ====

# üîê KEYCLOAK CONFIGURATION  
KEYCLOAK_ADMIN_PASSWORD=admin123
KEYCLOAK_ADMIN_CLIENT_SECRET=your-secure-backend-secret-key-here

# üìä DATABASE CONFIGURATION
POSTGRES_DB=core
POSTGRES_USER=core
POSTGRES_PASSWORD=core

# üéØ MULTI-TENANCY CONFIGURATION
TENANCY_DEFAULT_TENANT_KEY=core-platform

# üîë JWT & AUTH CONFIGURATION
AUTH_JWT_TENANT_CLAIM=tenant

# üåê CORS CONFIGURATION - Wildcard support for all subdomains
CORS_ORIGINS=http://localhost:3000,https://*.core-platform.local

# üî¥ REDIS CONFIGURATION
# SECURITY: Set strong password for Redis authentication
# Generate: openssl rand -base64 32
# Production: Use different password per environment
REDIS_PASSWORD=

# üß™ DEVELOPMENT/TEST PASSWORDS (Change in production!)
TEST_USER_PASSWORD=TempPass123!
TEST_ADMIN_PASSWORD=TempAdminPass123! 
TENANT_ADMIN_PASSWORD=TempTenantAdmin123!

# üìà MONITORING & LOGGING
LOKI_ENABLED=true
GRAFANA_ADMIN_PASSWORD=admin123