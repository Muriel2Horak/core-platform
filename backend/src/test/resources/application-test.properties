# Test Configuration
spring.application.name=backend-test

# PostgreSQL via Testcontainers - configured by AbstractIntegrationTest @DynamicPropertySource
# These are defaults, will be overridden by Testcontainers
spring.datasource.url=jdbc:postgresql://localhost:5432/testdb
spring.datasource.username=test
spring.datasource.password=test
# DO NOT set driver-class-name - let Spring Boot auto-detect from JDBC URL

spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=validate

# Flyway for test migrations
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true

# Multitenancy test configuration
tenancy.default-tenant-key=test-tenant
auth.jwt.tenant-claim=tenant

# Disable security for easier testing
spring.security.oauth2.resourceserver.jwt.issuer-uri=
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration

# Kafka - DISABLE for unit tests (integration tests use embedded Kafka)
spring.kafka.enabled=false
spring.kafka.bootstrap-servers=
# Disable Kafka auto-configuration
spring.autoconfigure.exclude=\
  org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration,\
  org.springframework.boot.autoconfigure.kafka.KafkaAutoConfiguration

# Logging
logging.level.org.hibernate.SQL=DEBUG
logging.level.cz.muriel.core=DEBUG
logging.level.cz.muriel.core.tenant=TRACE
logging.level.org.testcontainers=INFO
logging.level.com.github.dockerjava=WARN
logging.level.org.apache.kafka=ERROR
logging.level.org.springframework.kafka=ERROR