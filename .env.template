# üîê SECURITY CONFIGURATION TEMPLATE
# Copy this file to .env and fill in your secure values
# NEVER commit .env file to repository!

# =============================================================================
# üåê DOMAIN CONFIGURATION
# =============================================================================

# Primary domain for the application (REQUIRED)
# Change this to your actual domain (e.g., muriel-cz.cz, localhost, etc.)
DOMAIN=core-platform.local

# =============================================================================
# üö® CRITICAL SECURITY SETTINGS
# =============================================================================

# Keycloak Admin Service Account (REQUIRED)
KEYCLOAK_ADMIN_BASE_URL=http://keycloak:8080
KEYCLOAK_ADMIN_REALM=master
KEYCLOAK_ADMIN_CLIENT_ID=backend-admin-service
KEYCLOAK_ADMIN_CLIENT_SECRET=your-secure-backend-secret-key-here
KEYCLOAK_TARGET_REALM=core-platform

# Database Credentials (REQUIRED)
DB_HOST=core-db
DB_PORT=5432
DB_NAME=core_platform
DB_USERNAME=core_user
DB_PASSWORD=core

# JWT/OIDC Configuration (REQUIRED)
OIDC_ISSUER=http://keycloak:8080/realms/admin
OIDC_API_AUDIENCE=api
CORS_ORIGINS=http://localhost:3000,https://your-production-domain.com

# Application Secrets (REQUIRED)
APP_SECRET_KEY=YOUR_64_CHARACTER_RANDOM_SECRET_KEY_HERE
JWT_SIGNING_KEY=YOUR_JWT_SIGNING_SECRET_HERE

# =============================================================================
# üîí OPTIONAL SECURITY SETTINGS
# =============================================================================

# Rate Limiting
RATE_LIMIT_AUTH_REQUESTS_PER_MINUTE=10
RATE_LIMIT_API_REQUESTS_PER_MINUTE=100

# Session Security
SESSION_TIMEOUT_MINUTES=30
TOKEN_REFRESH_THRESHOLD_SECONDS=300

# Audit Logging
AUDIT_LOG_LEVEL=INFO
AUDIT_LOG_RETENTION_DAYS=90

# Security Headers
CSP_POLICY="default-src 'self'; script-src 'self' 'unsafe-inline'"
HSTS_MAX_AGE_SECONDS=31536000

# =============================================================================
# üåç ENVIRONMENT SPECIFIC
# =============================================================================

# Environment (development|staging|production)
ENVIRONMENT=development
LOG_LEVEL=DEBUG

# External Services
GRAFANA_ADMIN_PASSWORD=admin123
PROMETHEUS_PASSWORD=YOUR_PROMETHEUS_PASSWORD_HERE

# =============================================================================
# üìù SECURITY NOTES
# =============================================================================
# 
# 1. Generate strong passwords: openssl rand -base64 32
# 2. Use different secrets for each environment
# 3. Rotate secrets regularly (quarterly minimum)
# 4. Never log or expose these values
# 5. Use secrets management in production (HashiCorp Vault, AWS Secrets Manager)
# 
# =============================================================================

# =============================================================================
# üîó Keycloak SPI Webhook (muriel-webhook)
# =============================================================================

# Keycloak SPI Webhook Configuration (REQUIRED)
KC_EVENT_WEBHOOK_URL=http://backend:8080/internal/keycloak/events
KC_EVENT_WEBHOOK_SECRET=YOUR_SECURE_WEBHOOK_SECRET_HERE

# üßπ SIMPLIFIED: No realm-tenant mapping needed (realm = tenant key)
# KC_REALM_TENANT_MAP - REMOVED (not needed anymore)

# Optional Keycloak SPI Configuration
KC_ENABLED_TYPES=USER_CREATED,USER_UPDATED,USER_DELETED
KC_LOG_LEVEL=INFO,cz.muriel.keycloak.webhook:DEBUG

# Ostatn√≠ Keycloak konfigurace
KEYCLOAK_ADMIN=${KEYCLOAK_ADMIN:-admin}
KEYCLOAK_ADMIN_PASSWORD=admin123

# ==== üåê CORE PLATFORM CONFIGURATION ====

# üè∑Ô∏è DOMAIN CONFIGURATION
# Change this to your actual domain (e.g., yourcompany.com, localhost, etc.)
DOMAIN=core-platform.local

# üîê KEYCLOAK CONFIGURATION  
KEYCLOAK_ADMIN_PASSWORD=admin123
KEYCLOAK_ADMIN_CLIENT_SECRET=your-secure-backend-secret-key-here

# üìä DATABASE CONFIGURATION
POSTGRES_DB=core
POSTGRES_USER=core
POSTGRES_PASSWORD=core

# üéØ MULTI-TENANCY CONFIGURATION
TENANCY_DEFAULT_TENANT_KEY=core-platform

# üîë JWT & AUTH CONFIGURATION
AUTH_JWT_TENANT_CLAIM=tenant

# üåê CORS CONFIGURATION - Add production domains as needed
CORS_ORIGINS=http://localhost:3000,https://your-production-domain.com

# üß™ DEVELOPMENT/TEST PASSWORDS (Change in production!)
TEST_USER_PASSWORD=TempPass123!
TEST_ADMIN_PASSWORD=TempAdminPass123! 
TENANT_ADMIN_PASSWORD=TempTenantAdmin123!

# üìà MONITORING & LOGGING
LOKI_ENABLED=true
GRAFANA_ADMIN_PASSWORD=admin123