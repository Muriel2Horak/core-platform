# üîê SECURITY CONFIGURATION TEMPLATE
# Copy this file to .env and fill in your secure values
# NEVER commit .env file to repository!

# =============================================================================
# üåê DOMAIN CONFIGURATION
# =============================================================================

# Primary domain for the application (REQUIRED)
# Change this to your actual domain (e.g., muriel-cz.cz, localhost, etc.)
DOMAIN=core-platform.local

# =============================================================================
# üö® CRITICAL SECURITY SETTINGS
# =============================================================================

# Keycloak Admin Service Account (REQUIRED)
KEYCLOAK_ADMIN_BASE_URL=http://keycloak:8080
KEYCLOAK_ADMIN_REALM=master
KEYCLOAK_ADMIN_CLIENT_ID=backend-admin-service
KEYCLOAK_ADMIN_CLIENT_SECRET=YOUR_SECURE_CLIENT_SECRET_HERE
KEYCLOAK_TARGET_REALM=core-platform

# Database Credentials (REQUIRED)
DB_HOST=core-db
DB_PORT=5432
DB_NAME=core_platform
DB_USERNAME=core_user
DB_PASSWORD=YOUR_SECURE_DB_PASSWORD_HERE

# JWT/OIDC Configuration (REQUIRED)
OIDC_ISSUER=http://keycloak:8080/realms/core-platform
OIDC_API_AUDIENCE=api
CORS_ORIGINS=http://localhost:3000,https://your-production-domain.com

# Application Secrets (REQUIRED)
APP_SECRET_KEY=YOUR_64_CHARACTER_RANDOM_SECRET_KEY_HERE
JWT_SIGNING_KEY=YOUR_JWT_SIGNING_SECRET_HERE

# =============================================================================
# üîí OPTIONAL SECURITY SETTINGS
# =============================================================================

# Rate Limiting
RATE_LIMIT_AUTH_REQUESTS_PER_MINUTE=10
RATE_LIMIT_API_REQUESTS_PER_MINUTE=100

# Session Security
SESSION_TIMEOUT_MINUTES=30
TOKEN_REFRESH_THRESHOLD_SECONDS=300

# Audit Logging
AUDIT_LOG_LEVEL=INFO
AUDIT_LOG_RETENTION_DAYS=90

# Security Headers
CSP_POLICY="default-src 'self'; script-src 'self' 'unsafe-inline'"
HSTS_MAX_AGE_SECONDS=31536000

# =============================================================================
# üåç ENVIRONMENT SPECIFIC
# =============================================================================

# Environment (development|staging|production)
ENVIRONMENT=development
LOG_LEVEL=DEBUG

# External Services
GRAFANA_ADMIN_PASSWORD=YOUR_GRAFANA_PASSWORD_HERE
PROMETHEUS_PASSWORD=YOUR_PROMETHEUS_PASSWORD_HERE

# =============================================================================
# üìù SECURITY NOTES
# =============================================================================
# 
# 1. Generate strong passwords: openssl rand -base64 32
# 2. Use different secrets for each environment
# 3. Rotate secrets regularly (quarterly minimum)
# 4. Never log or expose these values
# 5. Use secrets management in production (HashiCorp Vault, AWS Secrets Manager)
# 
# =============================================================================

# =============================================================================
# üîó Keycloak SPI Webhook (muriel-webhook)
# =============================================================================

# Webhook konfigurace pro Keycloak SPI
KC_WEBHOOK_ENDPOINT_URL=http://backend:8080/internal/keycloak/events
KC_WEBHOOK_SECRET=${KC_WEBHOOK_SECRET:-CHANGE_ME_IN_PRODUCTION}
KC_REALM_TENANT_MAP=${KC_REALM_TENANT_MAP:-core-platform:default-tenant:1}

# Ostatn√≠ Keycloak konfigurace
KEYCLOAK_ADMIN=${KEYCLOAK_ADMIN:-admin}
KEYCLOAK_ADMIN_PASSWORD=${KEYCLOAK_ADMIN_PASSWORD:-CHANGE_ME_IN_PRODUCTION}

# form√°t: realm:tenantKey:tenantId[,realm2:tenantKey2:tenantId2...]
KC_REALM_TENANT_MAP=core-platform:test-tenant:a887f848-42cf-4b10-aff8-eaa8c488f3b1

# voliteln√©:
KC_ENABLED_TYPES=USER_CREATED,USER_UPDATED,USER_DELETED
KC_LOG_LEVEL=INFO,cz.muriel.keycloak.webhook:DEBUG
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin