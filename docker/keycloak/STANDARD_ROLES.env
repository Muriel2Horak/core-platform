# üé≠ Keycloak Role Definitions - Standard Role Set
#
# Definice standardn√≠ sady rol√≠ pro ka≈æd√Ω realm/tenant v Core Platform
# Tyto role se automaticky vytvo≈ô√≠ p≈ôi bootstrap nov√©ho realm/tenanta

## üìù Standard Roles Configuration

### Global Admin Realm Roles (realm: admin)
KEYCLOAK_STANDARD_ADMIN_ROLES=CORE_ROLE_USER,CORE_USER_MANAGER,CORE_ROLE_MONITORING,CORE_ROLE_TENANT_MONITORING,CORE_TENANT_ADMIN,CORE_ROLE_ADMIN

### Tenant Realm Roles (all tenant realms)
KEYCLOAK_STANDARD_TENANT_ROLES=CORE_ROLE_USER,CORE_USER_MANAGER,CORE_ROLE_TENANT_MONITORING,CORE_TENANT_ADMIN,CORE_ROLE_ADMIN

## üîê Role Descriptions

# CORE_ROLE_USER
# - Basic user role for platform access
# - Minimal permissions, read-only access to own data

# CORE_USER_MANAGER
# - Can manage users within the realm/tenant
# - User CRUD operations, role assignments

# CORE_ROLE_MONITORING (admin realm only)
# - Global monitoring access across all tenants
# - Grafana Editor role - can view and edit all dashboards
# - Only in admin realm

# CORE_ROLE_TENANT_MONITORING
# - Tenant-specific monitoring access
# - Grafana Viewer role - can view tenant dashboards
# - Available in both admin and tenant realms

# CORE_TENANT_ADMIN
# - Tenant administrator
# - Manages tenant users, settings, and monitoring
# - Composite role including: CORE_USER_MANAGER, CORE_ROLE_TENANT_MONITORING

# CORE_ROLE_ADMIN
# - Platform administrator (admin realm) or Tenant administrator (tenant realm)
# - Full access to all platform/tenant features
# - Composite role including all manager and monitoring roles

## üèóÔ∏è Composite Role Structure

### Admin Realm (admin):
# CORE_ROLE_ADMIN (composite) ‚Üí
#   ‚îú‚îÄ‚îÄ CORE_USER_MANAGER
#   ‚îú‚îÄ‚îÄ CORE_ROLE_MONITORING
#   ‚îî‚îÄ‚îÄ CORE_TENANT_ADMIN ‚Üí
#         ‚îú‚îÄ‚îÄ CORE_USER_MANAGER
#         ‚îî‚îÄ‚îÄ CORE_ROLE_TENANT_MONITORING

### Tenant Realm (e.g., tenant-abc):
# CORE_ROLE_ADMIN (composite) ‚Üí
#   ‚îú‚îÄ‚îÄ CORE_USER_MANAGER
#   ‚îî‚îÄ‚îÄ CORE_ROLE_TENANT_MONITORING
#
# CORE_TENANT_ADMIN (composite) ‚Üí
#   ‚îú‚îÄ‚îÄ CORE_USER_MANAGER
#   ‚îî‚îÄ‚îÄ CORE_ROLE_TENANT_MONITORING

## üìä Grafana Mapping

# Keycloak Role ‚Üí Grafana Role
# CORE_ROLE_ADMIN ‚Üí Admin (full access)
# CORE_ROLE_MONITORING ‚Üí Editor (can edit dashboards)
# CORE_ROLE_TENANT_MONITORING ‚Üí Viewer (read-only)
# CORE_TENANT_ADMIN ‚Üí Editor (via composite containing CORE_ROLE_TENANT_MONITORING)

## üîÑ Role Sync Behavior

# When processing USER_ROLE_ASSIGNED/REMOVED events:
# 1. Extract ALL user roles (including composite role members)
# 2. Check if ANY role matches monitoring patterns:
#    - CORE_ROLE_ADMIN (always grants access)
#    - CORE_ROLE_MONITORING (global monitoring)
#    - CORE_ROLE_TENANT_MONITORING (tenant monitoring)
#    - CORE_TENANT_ADMIN (composite containing monitoring)
# 3. If match found ‚Üí Create/Update Grafana user
# 4. If no match ‚Üí Deactivate/Delete Grafana user (if exists)
