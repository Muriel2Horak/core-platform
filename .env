# =============================================================================
# üöÄ CORE PLATFORM ENVIRONMENT CONFIGURATION
# =============================================================================

# =============================================================================
# üåê DOMAIN CONFIGURATION
# =============================================================================
DOMAIN=core-platform.local

# =============================================================================
# üîê KEYCLOAK CONFIGURATION
# =============================================================================
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin123
KEYCLOAK_ADMIN_BASE_URL=https://keycloak:8443
KEYCLOAK_ADMIN_REALM=admin
KEYCLOAK_TARGET_REALM=admin
KEYCLOAK_ADMIN_CLIENT_ID=backend-admin-service
KEYCLOAK_ADMIN_CLIENT_SECRET=lYHZXQHv1lHEn1bToLzySIchd7dVIFmm

# Master realm credentials for realm management
KEYCLOAK_MASTER_USERNAME=admin
KEYCLOAK_MASTER_PASSWORD=admin123

# Test User Passwords (DEVELOPMENT ONLY)
TEST_USER_PASSWORD=Test.1234
TEST_ADMIN_PASSWORD=Test.1234

# E2E Test Configuration
E2E_USER=test
E2E_PASS=Test.1234
E2E_ADMIN_USER=test_admin
E2E_ADMIN_PASS=Test.1234

# JWT/OIDC Configuration
OIDC_ISSUER_URI=https://admin.${DOMAIN}/realms/admin
OIDC_JWK_SET_URI=https://admin.${DOMAIN}/realms/admin/protocol/openid-connect/certs
OIDC_API_AUDIENCE=api

# =============================================================================
# üóÑÔ∏è DATABASE CONFIGURATION
# =============================================================================
# Internal Docker services use simplified credentials
DB_INTERNAL_USERNAME=core
DB_INTERNAL_PASSWORD=core
DB_INTERNAL_NAME=core

# Application database (more secure)
DB_HOST=core-db
DB_PORT=5432
DB_NAME=core_platform
DB_USERNAME=core_user
DB_PASSWORD=RcdCCk8H92wUCOZiAhjsCERK33BSD6VAHUoo67oN3/U=
DATABASE_URL=jdbc:postgresql://core-db:5432/core_platform

# Keycloak database credentials (separate for security)
KEYCLOAK_DB_USERNAME=keycloak
KEYCLOAK_DB_PASSWORD=keycloak
KEYCLOAK_DB_NAME=keycloak

# Grafana database credentials (dedicated user for isolation)
GRAFANA_DB_USERNAME=grafana
GRAFANA_DB_PASSWORD=grafana
GRAFANA_DB_NAME=grafana

# Database Admin Tools
PGADMIN_EMAIL=admin@local.dev
PGADMIN_PASSWORD=admin

# =============================================================================
# üîê CORS & SECURITY CONFIGURATION
# =============================================================================
CORS_ORIGINS=http://localhost:3000,https://*.${DOMAIN}

# Application Secrets
APP_SECRET_KEY=aXOdaCQZXsbVpwe0zX/+cApk2LW1NxzoEQ3UqnVTGkMg4W+Kuzx9OBnPLiQT8eU1sh/CbABgBFiZRwCBLTMYNQ==
JWT_SIGNING_KEY=aXOdaCQZXsbVpwe0zX/+cApk2LW1NxzoEQ3UqnVTGkMg4W+Kuzx9OBnPLiQT8eU1sh/CbABgBFiZRwCBLTMYNQ==
KEYCLOAK_CLIENT_SECRET=q55Oy8mvQ82zNhQAErVEoXI6pDQxQz4x

# Rate Limiting
RATE_LIMIT_AUTH_REQUESTS_PER_MINUTE=10
RATE_LIMIT_API_REQUESTS_PER_MINUTE=100

# Session Security
SESSION_TIMEOUT_MINUTES=30
TOKEN_REFRESH_THRESHOLD_SECONDS=300

# =============================================================================
# üîó WEBHOOK CONFIGURATION
# =============================================================================
KC_WEBHOOK_ENDPOINT_URL=http://backend:8080/internal/keycloak/events
KC_WEBHOOK_SECRET=YLW4bs6Pl1+a+AJZhMvmordEqU9Z/xpkmGM3f883U3o=
KC_ENABLED_TYPES=USER_CREATED,USER_UPDATED,USER_DELETED
KC_LOG_LEVEL=INFO,cz.muriel.keycloak.webhook:DEBUG

# =============================================================================
# üåç ENVIRONMENT & PORTS
# =============================================================================
ENVIRONMENT=development
LOG_LEVEL=DEBUG

HTTP_PORT=80
HTTPS_PORT=443
KEYCLOAK_PORT=8081
GRAFANA_PORT=3001
LOKI_PORT=3100

# Admin passwords (development only!)
GRAFANA_PASSWORD=admin
GRAFANA_OAUTH_SECRET=grafana-secret-change-in-prod
# üîê Grafana JWT Configuration (for BFF SSO embedding)
# CRITICAL: JWT TTL must match Keycloak access token TTL (300s = 5 min)
GRAFANA_JWT_TTL=300
# Legacy HMAC secret (kept for backward compatibility, not used with RS256)
GRAFANA_JWT_SECRET=change-me-in-production-to-secure-random-256bit-key
PROMETHEUS_PASSWORD=admin
# =============================================================================
# üî¥ REDIS CONFIGURATION (Phase 2)
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=

# =============================================================================
# üì¶ MINIO CONFIGURATION (Phase 2)
# =============================================================================
MINIO_ENDPOINT=http://minio:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET_PREFIX=tenant

# =============================================================================
# üåê WEBSOCKET CONFIGURATION (Phase 2)
# =============================================================================
WEBSOCKET_ALLOWED_ORIGINS=https://*.core-platform.local,http://localhost:*

# =============================================================================
# üìä STREAMING & KAFKA CONFIGURATION
# =============================================================================
STREAMING_ENABLED=false
KAFKA_SERVERS=kafka:9092
STREAMING_TOPIC_PREFIX=core
STREAMING_SECURITY_MODE=PLAINTEXT
PROMETHEUS_PORT=9090

# Docker Compose Profiles
COMPOSE_PROFILES=streaming

# =============================================================================
# üìä MONITORING BFF & GRAFANA CONFIGURATION
# =============================================================================
# Grafana base URL (internal Docker network)
GRAFANA_BASE_URL=http://grafana:3000

# Grafana Admin GUI OAuth (Keycloak OIDC)
GRAFANA_ADMIN_OIDC_SECRET=grafana-admin-oidc-secret-change-in-prod

# Service Account Tokens (SAT) per tenant - LOAD FROM VAULT IN PRODUCTION!
# These are placeholders for development
GRAFANA_SAT_CORE_PLATFORM=glsa_dev_placeholder_core_platform
GRAFANA_SAT_TEST_TENANT=glsa_dev_placeholder_test_tenant

# =============================================================================
# üìä CUBE.JS REPORTING CONFIGURATION
# =============================================================================
CUBE_PORT=4000
CUBE_API_SECRET=dev_secret_change_in_production_min_32_chars
CUBE_DEV_MODE=true
