# S3: Form Components & Validation UX

**EPIC:** [EPIC-004: UX/UI & Design System](../README.md)  
**Status:** 游댯 **TODO**  
**Priority:** P1  
**LOC:** ~800 콏치dk콢  
**Effort:** ~10 hodin

---

## 游늶 Story Description

Jako **developer**, chci **standardizovan칠 form komponenty s validac칤 a error handling**, abych **mohl rychle vytv치콏et konzistentn칤 formul치콏e s dobrou UX**.

---

## 游꿢 Acceptance Criteria

### AC1: Form Components Library
- **GIVEN** form komponenta
- **WHEN** zobraz칤m formul치콏
- **THEN** vid칤m:
  - TextField (text, email, password, number)
  - Select/Autocomplete
  - Checkbox/Switch
  - RadioGroup
  - DatePicker/TimePicker
  - FileUpload (drag-and-drop)

### AC2: Validation System
- **GIVEN** form s validac칤
- **WHEN** zad치m nevalidn칤 hodnotu
- **THEN** zobraz칤:
  - Error message pod fieldem
  - Red border na fieldu
  - Field icon (error icon)
  - Tooltip s n치pov캩dou

### AC3: Form State Management
- **GIVEN** formul치콏
- **THEN** podporuje:
  - react-hook-form integration
  - Yup/Zod schema validation
  - Dirty/touched state tracking
  - Submit state (loading/success/error)

### AC4: Accessibility
- **GIVEN** form field
- **THEN** m치:
  - aria-label/aria-describedby
  - Error announcements (aria-live)
  - Keyboard navigation
  - Focus management

---

## 游닍 Implementation

### Form Components
```tsx
// FormTextField.tsx
export const FormTextField: React.FC<FormTextFieldProps> = ({
  name,
  label,
  rules,
  ...props
}) => {
  const { control } = useFormContext();
  
  return (
    <Controller
      name={name}
      control={control}
      rules={rules}
      render={({ field, fieldState: { error } }) => (
        <TextField
          {...field}
          {...props}
          label={label}
          error={!!error}
          helperText={error?.message}
          fullWidth
        />
      )}
    />
  );
};

// FormSelect.tsx
export const FormSelect: React.FC<FormSelectProps> = ({
  name,
  label,
  options,
  rules
}) => {
  const { control } = useFormContext();
  
  return (
    <Controller
      name={name}
      control={control}
      rules={rules}
      render={({ field, fieldState: { error } }) => (
        <FormControl fullWidth error={!!error}>
          <InputLabel>{label}</InputLabel>
          <Select {...field} label={label}>
            {options.map(opt => (
              <MenuItem key={opt.value} value={opt.value}>
                {opt.label}
              </MenuItem>
            ))}
          </Select>
          {error && <FormHelperText>{error.message}</FormHelperText>}
        </FormControl>
      )}
    />
  );
};
```

### Validation Schema
```tsx
import { z } from 'zod';

export const userFormSchema = z.object({
  email: z.string().email('Invalid email'),
  password: z.string().min(8, 'Min 8 characters'),
  role: z.enum(['admin', 'user']),
  termsAccepted: z.boolean().refine(val => val === true, {
    message: 'You must accept terms'
  })
});

type UserFormData = z.infer<typeof userFormSchema>;
```

### Form Usage
```tsx
export const UserForm: React.FC = () => {
  const methods = useForm<UserFormData>({
    resolver: zodResolver(userFormSchema)
  });
  
  const onSubmit = async (data: UserFormData) => {
    await createUser(data);
  };
  
  return (
    <FormProvider {...methods}>
      <form onSubmit={methods.handleSubmit(onSubmit)}>
        <FormTextField name="email" label="Email" type="email" />
        <FormTextField name="password" label="Password" type="password" />
        <FormSelect name="role" label="Role" options={roleOptions} />
        <FormCheckbox name="termsAccepted" label="I accept terms" />
        
        <Button type="submit" disabled={methods.formState.isSubmitting}>
          {methods.formState.isSubmitting ? 'Saving...' : 'Submit'}
        </Button>
      </form>
    </FormProvider>
  );
};
```

---

**Related:** [EPIC-004 README](../README.md#s3-form-components--validation)
